{notempty name="searchForm"}
{:$searchForm->render()}
{/notempty}
{notempty name="toolbar"}
<div class="row m-b-10 m-l-10">
    {:$toolbar->render()}
</div>
{/notempty}

<div id="{$id}" class="row">
    <table class="table {$class}" {$attr|raw}>
        {notempty name="$headers"}
        <thead>
            <tr>
                {if condition="$useCheckbox"}
                <th class="table-checkbox">
                    <label class="lyear-checkbox checkbox-primary">
                        <input type="checkbox" id="checkall-{$name}" data-check="check-{$name}" class="checkall
                            table-row-checkall"><span></span>
                    </label>
                </th>
                {/if}
                {volist name="headers" id="header"}
                <th class="{$headTextAlign}">
                    {$header|raw}
                    {in name="$key" value="$sortable"}
                    {if condition="$key eq $sortKey"}
                    {if condition="$sortOrder eq 'asc'"}
                    <a data-key="{$key}" href="javascript:;" class="sortable mdi mdi-sort-ascending pull-right"></a>
                    {else/}
                    <a data-key="{$key}" href="javascript:;" class="sortable mdi mdi-sort-descending pull-right"></a>
                    {/if}
                    {else/}
                    <a data-key="{$key}" href="javascript:;" class="sortable mdi mdi-sort pull-right"></a>
                    {/if}
                    {/in}
                </th>
                {/volist}
                {notempty name="$actionbars"}
                <th class="{$headTextAlign}">{$actionRowText|raw}</th>
                {/notempty}
            </tr>
        </thead>
        {/notempty}
        <tbody>
            {volist name="list" id="row"}
            <tr class="table-row-id" data-id="{$ids[$key]}">
                {if condition="$useCheckbox"}
                <td class="table-checkbox {$tdClass}">
                    <label class="lyear-checkbox checkbox-primary">
                        <input type="checkbox" id="{$name}-{$key}" value="{$ids[$key]}"
                            class="check-{$name} table-row"><span></span>
                    </label>
                </td>
                {/if}
                {foreach name="row" id="col" key="co"}
                <td class="col-md-{$col.wapper->getColSize()} {$tdClass} {$col.wapper->getClass()}" {$col.wapper->
                    getAttrWithStyle()|raw}>
                    {$col.value|raw}
                </td>
                {/foreach}
                {notempty name="$actionbars"}
                <td class="text-center row-__action__ {$verticalAlign}">
                    {$actionbars[$key]|raw}
                </td>
                {/notempty}
            </tr>
            {/volist}
        </tbody>
    </table>
    {empty name="$list"}
    <div class="table-empty-text">
        {$emptyText|raw}
    </div>
    {/empty}
    {notempty name="paginator"}
    <nav class="{:$paginator->getClass()}" {:$paginator->getAttrWithStyle()}>
        {:$paginator->render()}
    </nav>
    {/notempty}
    <script>
        var partial = '{$partial}' == 1;

        document.getElementById('form-__sort__-{$id}').value = '{$sort}';

        if (partial) {
            $('#form-__page__-{$id}').val('{$paginator->currentPage()}');

            $('#{$id} input.checkall').each(function (i, e) {
                var checkall = $(e);
                var checkboxes = $('.' + checkall.data('check'));
                var count = checkboxes.size();

                checkall.on('change', function () {
                    checkboxes.prop('checked', checkall.is(':checked'));
                });

                checkboxes.on('change', function () {
                    var ss = 0;
                    checkboxes.each(function (ii, ee) {
                        if ($(ee).is(':checked')) {
                            ss += 1;
                        }
                    });
                    checkall.prop('checked', ss == count);
                });
            });

            $('#{$id} input.table-row-checkall').trigger('change');
            if (window.renderFiles) {
                window.renderFiles();
            }
        }
    </script>
</div>